

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Welcome to PublicSuffix 2.0! - Huimin Qu</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Huimin Qu">
<meta property="og:title" content="Welcome to PublicSuffix 2.0!">


  <link rel="canonical" href="http://localhost:4000/vendor/bundle/gems/public_suffix-2.0.5/2.0-Upgrade/">
  <meta property="og:url" content="http://localhost:4000/vendor/bundle/gems/public_suffix-2.0.5/2.0-Upgrade/">







  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Huimin Qu",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Huimin Qu Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>

<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Huimin Qu</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/projects/">Projects</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/cv/">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/miscellaneous/">Misc.</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/profile.JPG" class="author__avatar" alt="Huimin Qu">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Huimin Qu</h3>
    <p class="author__bio">Undergraduate Student at Xiamen University. Research area: Astrophysics.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Xiamen, China</li>
      
      
      
      
        <li><a href="mailto:quhuimin@stu.xmu.edu.cn"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/HuiminQu"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Welcome to PublicSuffix 2.0!">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Welcome to PublicSuffix 2.0!
</h1>
          
        
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="welcome-to-publicsuffix-20">Welcome to PublicSuffix 2.0!</h1>

<p>PublicSuffix 2.0 contains a rewritten internal representation and comparison logic, that drastically increases the lookup performance. The new version also changes several internal and external API.</p>

<p>This document documents the most relevant changes to help you upgrading from PublicSuffix 1.0 to 2.0.</p>

<h2 id="whats-new">What’s New</h2>

<ul>
  <li>The library is now 100% compliants with the official PublicSuffix tests. The major breaking change you may experience, is that if a domain passed as input doesn’t match any rule, the rule <code class="language-plaintext highlighter-rouge">*</code> is assumed. You can override this behavior by passing a custom default rule with the <code class="language-plaintext highlighter-rouge">default_rule</code> option. The old behavior can be restored by passing <code class="language-plaintext highlighter-rouge">default_rule: nil</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">PublicSuffix.domain</code> is a new method that parses the input and returns the domain (combination of second level domain + suffix). This is a convenient helper to parse a domain name, for example when you need to determine the cookie or SSL scope.</li>
  <li>Added the ability to disable the use of private domains either at runtime, in addition to the ability to not load the private domains section when reading the list (<code class="language-plaintext highlighter-rouge">private_domains: false</code>). This feature also superseded the <code class="language-plaintext highlighter-rouge">private_domains</code> class-level attribute, that is no longer available.</li>
</ul>

<h2 id="upgrade">Upgrade</h2>

<p>When upgrading, here’s the most relevant changes to keep an eye on:</p>

<ul>
  <li>Several futile utility helpers were removed, such as <code class="language-plaintext highlighter-rouge">Domain#rule</code>, <code class="language-plaintext highlighter-rouge">Domain#is_a_domain?</code>, <code class="language-plaintext highlighter-rouge">Domain#is_a_subdomain?</code>, <code class="language-plaintext highlighter-rouge">Domain#valid?</code>. You can easily obtain the same result by having a custom method that reconstructs the logic, and/or calling <code class="language-plaintext highlighter-rouge">PublicSuffix.{domain|parse}(domain.to_s)</code>.</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PublicSuffix::List.private_domains</code> is no longer available. Instead, you now have two ways to enable/disable the private domains:</p>

    <ol>
      <li>At runtime, by using the <code class="language-plaintext highlighter-rouge">ignore_private</code> option</li>
    </ol>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">domain</span><span class="p">(</span><span class="s2">"something.blogspot.com"</span><span class="p">,</span> <span class="ss">ignore_private: </span><span class="kp">true</span><span class="p">)</span>
</code></pre></div>    </div>

    <ol>
      <li>Loading a filtered list:</li>
    </ol>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># Disable support for private TLDs</span>
  <span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="p">.</span><span class="nf">default</span> <span class="o">=</span> <span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="o">::</span><span class="no">DEFAULT_LIST_PATH</span><span class="p">),</span> <span class="ss">private_domains: </span><span class="kp">false</span><span class="p">)</span>
  <span class="c1"># =&gt; "blogspot.com"</span>
  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">domain</span><span class="p">(</span><span class="s2">"something.blogspot.com"</span><span class="p">)</span>
  <span class="c1"># =&gt; "blogspot.com"</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now that the library is 100% compliant with the official PublicSuffix algorithm, if a domain passed as input doesn’t match any rule, the wildcard rule <code class="language-plaintext highlighter-rouge">*</code> is assumed. This means that unlisted TLDs will be considered valid by default, when they would have been invalid in 1.x. However, you can override this behavior to emulate the 1.x behavior if needed:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># 1.x:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">)</span>
  <span class="c1"># =&gt; false</span>

  <span class="c1"># 2.x:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">)</span>
  <span class="c1"># =&gt; true</span>

  <span class="c1"># Overriding 2.x behavior if needed:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">,</span> <span class="ss">default_rule: </span><span class="kp">nil</span><span class="p">)</span>
  <span class="c1"># =&gt; false</span>
</code></pre></div>    </div>
  </li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

      


    </div>

    
  </article>

  
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/HuiminQu"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Huimin Qu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

