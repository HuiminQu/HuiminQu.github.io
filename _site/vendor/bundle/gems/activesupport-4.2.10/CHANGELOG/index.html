

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Rails 4.2.10 (September 27, 2017) ## - Huimin Qu</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Huimin Qu">
<meta property="og:title" content="Rails 4.2.10 (September 27, 2017) ##">


  <link rel="canonical" href="https://huiminqu.github.io/vendor/bundle/gems/activesupport-4.2.10/CHANGELOG/">
  <meta property="og:url" content="https://huiminqu.github.io/vendor/bundle/gems/activesupport-4.2.10/CHANGELOG/">







  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Huimin Qu",
      "url" : "https://huiminqu.github.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://huiminqu.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Huimin Qu Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://huiminqu.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="https://huiminqu.github.io/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="https://huiminqu.github.io/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="https://huiminqu.github.io/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="https://huiminqu.github.io/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="https://huiminqu.github.io/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="https://huiminqu.github.io/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="https://huiminqu.github.io/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="https://huiminqu.github.io/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="https://huiminqu.github.io/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="https://huiminqu.github.io/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="https://huiminqu.github.io/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="https://huiminqu.github.io/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="https://huiminqu.github.io/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="https://huiminqu.github.io/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="https://huiminqu.github.io/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="https://huiminqu.github.io/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="https://huiminqu.github.io/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="https://huiminqu.github.io/assets/css/academicons.css"/>

<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://huiminqu.github.io/">Huimin Qu</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://huiminqu.github.io/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://huiminqu.github.io/projects/">Projects</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://huiminqu.github.io/cv/">CV</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://huiminqu.github.io/images/profile.jpeg" class="author__avatar" alt="Huimin Qu">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Huimin Qu</h3>
    <p class="author__bio">Undergraduate Student at Xiamen University. Research area: Astrophysics.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Xiamen, China</li>
      
      
      
      
        <li><a href="mailto:quhuimin@stu.xmu.edu.cn"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/HuiminQu"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Rails 4.2.10 (September 27, 2017) ##">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Rails 4.2.10 (September 27, 2017) ##
</h1>
          
        
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <h2 id="rails-4210-september-27-2017">Rails 4.2.10 (September 27, 2017)</h2>

<ul>
  <li>No changes.</li>
</ul>

<h2 id="rails-429-june-26-2017">Rails 4.2.9 (June 26, 2017)</h2>

<ul>
  <li>
    <p>Fixed bug in <code class="language-plaintext highlighter-rouge">DateAndTime::Compatibility#to_time</code> that caused it to
raise <code class="language-plaintext highlighter-rouge">RuntimeError: can't modify frozen Time</code> when called on any frozen <code class="language-plaintext highlighter-rouge">Time</code>.
Properly pass through the frozen <code class="language-plaintext highlighter-rouge">Time</code> or <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code> object
when calling <code class="language-plaintext highlighter-rouge">#to_time</code>.</p>

    <p><em>Kevin McPhillips</em> &amp; <em>Andrew White</em></p>
  </li>
  <li>
    <p>Restore the return type of <code class="language-plaintext highlighter-rouge">DateTime#utc</code></p>

    <p>In Rails 5.0 the return type of <code class="language-plaintext highlighter-rouge">DateTime#utc</code> was changed to <code class="language-plaintext highlighter-rouge">Time</code> to be
consistent with the new <code class="language-plaintext highlighter-rouge">DateTime#localtime</code> method. When these changes were
backported in #27553 this inadvertently changed the return type in a patcn
release. Since <code class="language-plaintext highlighter-rouge">DateTime#localtime</code> was new in Rails 4.2.8 it’s okay to
restore the return type of <code class="language-plaintext highlighter-rouge">DateTime#utc</code> but keep <code class="language-plaintext highlighter-rouge">DateTime#localtime</code> as
returning <code class="language-plaintext highlighter-rouge">Time</code> without breaking backwards compatibility.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>In Core Extensions, make <code class="language-plaintext highlighter-rouge">MarshalWithAutoloading#load</code> pass through the second, optional
argument for <code class="language-plaintext highlighter-rouge">Marshal#load( source [, proc] )</code>. This way we don’t have to do
<code class="language-plaintext highlighter-rouge">Marshal.method(:load).super_method.call(sourse, proc)</code> just to be able to pass a proc.</p>

    <p><em>Jeff Latz</em></p>
  </li>
  <li>
    <p>Cache <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone#to_datetime</code> before freezing.</p>

    <p><em>Adam Rice</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">AS::Testing::TimeHelpers#travel_to</code> now changes <code class="language-plaintext highlighter-rouge">DateTime.now</code> as well as
<code class="language-plaintext highlighter-rouge">Time.now</code> and <code class="language-plaintext highlighter-rouge">Date.today</code>.</p>

    <p><em>Yuki Nishijima</em></p>
  </li>
</ul>

<h2 id="rails-428-february-21-2017">Rails 4.2.8 (February 21, 2017)</h2>

<ul>
  <li>
    <p>Make <code class="language-plaintext highlighter-rouge">getlocal</code> and <code class="language-plaintext highlighter-rouge">getutc</code> always return instances of <code class="language-plaintext highlighter-rouge">Time</code> for
<code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code> and <code class="language-plaintext highlighter-rouge">DateTime</code>. This eliminates a possible
stack level too deep error in <code class="language-plaintext highlighter-rouge">to_time</code> where <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code>
was wrapping a <code class="language-plaintext highlighter-rouge">DateTime</code> instance. As a consequence of this the internal
time value in <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code> is now always an instance of
<code class="language-plaintext highlighter-rouge">Time</code> in the UTC timezone, whether that’s as the UTC time directly or
a representation of the local time in the timezone. There should be no
consequences of this internal change and if there are it’s a bug due to
leaky abstractions.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">DateTime#subsec</code> to return the fraction of a second as a <code class="language-plaintext highlighter-rouge">Rational</code>.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Add additional aliases for <code class="language-plaintext highlighter-rouge">DateTime#utc</code> to mirror the ones on
<code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code> and <code class="language-plaintext highlighter-rouge">Time</code>.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">DateTime#localtime</code> to return an instance of <code class="language-plaintext highlighter-rouge">Time</code> in the system’s
local timezone. Also aliased to <code class="language-plaintext highlighter-rouge">getlocal</code>.</p>

    <p><em>Andrew White</em>, <em>Yuichiro Kaneko</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">Time#sec_fraction</code> to return the fraction of a second as a <code class="language-plaintext highlighter-rouge">Rational</code>.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">ActiveSupport.to_time_preserves_timezone</code> config option to control
how <code class="language-plaintext highlighter-rouge">to_time</code> handles timezones. In Ruby 2.4+ the behavior will change
from converting to the local system timezone, to preserving the timezone
of the receiver. This config option defaults to false so that apps made
with earlier versions of Rails are not affected when upgrading, e.g:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; ENV['TZ'] = 'US/Eastern'

&gt;&gt; "2016-04-23T10:23:12.000Z".to_time
=&gt; "2016-04-23T06:23:12.000-04:00"

&gt;&gt; ActiveSupport.to_time_preserves_timezone = true

&gt;&gt; "2016-04-23T10:23:12.000Z".to_time
=&gt; "2016-04-23T10:23:12.000Z"
</code></pre></div>    </div>

    <p>Fixes #24617.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">init_with</code> to <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code> and <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeZone</code></p>

    <p>It is helpful to be able to run apps concurrently written in successive
versions of Rails to aid migration, e.g. run Rails 4.2 and 5.0 variants
of your application at the same time to carry out A/B testing.</p>

    <p>To do this serialization formats need to be cross compatible and the
change in 3aa26cf didn’t meet this criteria because the Psych loader
checks for the existence of <code class="language-plaintext highlighter-rouge">init_with</code> before setting the instance
variables and the wrapping behavior of <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone</code>
tries to see if the <code class="language-plaintext highlighter-rouge">Time</code> instance responds to <code class="language-plaintext highlighter-rouge">init_with</code> before the
<code class="language-plaintext highlighter-rouge">@time</code> variable is set.</p>

    <p>To fix this we backported just the <code class="language-plaintext highlighter-rouge">init_with</code> behavior from the change
in 3aa26cf. If the revived instance is then written out to YAML again
it will revert to the default Rails 4.2 behavior of converting it to
a UTC timestamp string.</p>

    <p>Fixes #26296.</p>

    <p><em>Andrew White</em></p>
  </li>
  <li>
    <p>Fix <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone#in</code> across DST boundaries.</p>

    <p>Previously calls to <code class="language-plaintext highlighter-rouge">in</code> were being sent to the non-DST aware
method <code class="language-plaintext highlighter-rouge">Time#since</code> via <code class="language-plaintext highlighter-rouge">method_missing</code>. It is now aliased to
the DST aware <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone#since</code> which handles
transitions across DST boundaries, e.g:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Time.zone = "US/Eastern"

t = Time.zone.local(2016,11,6,1)
# =&gt; Sun, 06 Nov 2016 01:00:00 EDT -05:00

t.in(1.hour)
# =&gt; Sun, 06 Nov 2016 01:00:00 EST -05:00
</code></pre></div>    </div>

    <p>Fixes #26580.</p>

    <p><em>Thomas Balthazar</em></p>
  </li>
</ul>

<h2 id="rails-427-july-12-2016">Rails 4.2.7 (July 12, 2016)</h2>

<ul>
  <li>
    <p>Fixed <code class="language-plaintext highlighter-rouge">ActiveSupport::Logger.broadcast</code> so that calls to <code class="language-plaintext highlighter-rouge">#silence</code> now
properly delegate to all loggers. Silencing now properly suppresses logging
to both the log and the console.</p>

    <p><em>Kevin McPhillips</em></p>
  </li>
  <li>
    <p>Backported <code class="language-plaintext highlighter-rouge">ActiveSupport::LoggerThreadSafeLevel</code>. Assigning the
<code class="language-plaintext highlighter-rouge">Rails.logger.level</code> is now thread safe.</p>

    <p><em>Kevin McPhillips</em></p>
  </li>
  <li>
    <p>Fixed a problem with ActiveSupport::SafeBuffer.titleize calling capitalize
on nil.</p>

    <p><em>Brian McManus</em></p>
  </li>
  <li>
    <p>Time zones: Ensure that the UTC offset reflects DST changes that occurred
since the app started. Removes UTC offset caching, reducing performance,
but this is still relatively quick and isn’t in any hot paths.</p>

    <p><em>Alexey Shein</em></p>
  </li>
  <li>
    <p>Prevent <code class="language-plaintext highlighter-rouge">Marshal.load</code> from looping infinitely when trying to autoload a constant
which resolves to a different name.</p>

    <p><em>Olek Janiszewski</em></p>
  </li>
</ul>

<h2 id="rails-426-march-07-2016">Rails 4.2.6 (March 07, 2016)</h2>

<ul>
  <li>No changes.</li>
</ul>

<h2 id="rails-4252-february-26-2016">Rails 4.2.5.2 (February 26, 2016)</h2>

<ul>
  <li>No changes.</li>
</ul>

<h2 id="rails-4251-january-25-2015">Rails 4.2.5.1 (January 25, 2015)</h2>

<ul>
  <li>No changes.</li>
</ul>

<h2 id="rails-425-november-12-2015">Rails 4.2.5 (November 12, 2015)</h2>

<ul>
  <li>
    <p>Fix <code class="language-plaintext highlighter-rouge">TimeWithZone#eql?</code> to properly handle <code class="language-plaintext highlighter-rouge">TimeWithZone</code> created from <code class="language-plaintext highlighter-rouge">DateTime</code>:
    twz = DateTime.now.in_time_zone
    twz.eql?(twz.dup) =&gt; true</p>

    <p>Fixes #14178.</p>

    <p><em>Roque Pinel</em></p>
  </li>
  <li>
    <p>Handle invalid UTF-8 characters in <code class="language-plaintext highlighter-rouge">MessageVerifier.verify</code>.</p>

    <p><em>Roque Pinel</em>, <em>Grey Baker</em></p>
  </li>
</ul>

<h2 id="rails-424-august-24-2015">Rails 4.2.4 (August 24, 2015)</h2>

<ul>
  <li>
    <p>Fix a <code class="language-plaintext highlighter-rouge">SystemStackError</code> when encoding an <code class="language-plaintext highlighter-rouge">Enumerable</code> with <code class="language-plaintext highlighter-rouge">json</code> gem and
with the Active Support JSON encoder loaded.</p>

    <p>Fixes #20775.</p>

    <p><em>Sammy Larbi</em>, <em>Prathamesh Sonpatki</em></p>
  </li>
  <li>
    <p>Fix not calling <code class="language-plaintext highlighter-rouge">#default</code> on <code class="language-plaintext highlighter-rouge">HashWithIndifferentAcess#to_hash</code> when only
<code class="language-plaintext highlighter-rouge">default_proc</code> is set, which could raise.</p>

    <p><em>Simon Eskildsen</em></p>
  </li>
  <li>
    <p>Fix setting <code class="language-plaintext highlighter-rouge">default_proc</code> on <code class="language-plaintext highlighter-rouge">HashWithIndifferentAccess#dup</code></p>

    <p><em>Simon Eskildsen</em></p>
  </li>
</ul>

<h2 id="rails-423-june-25-2015">Rails 4.2.3 (June 25, 2015)</h2>

<ul>
  <li>
    <p>Fix a range of values for parameters of the Time#change</p>

    <p><em>Nikolay Kondratyev</em></p>
  </li>
  <li>
    <p>Add some missing <code class="language-plaintext highlighter-rouge">require 'active_support/deprecation'</code></p>

    <p><em>Akira Matsuda</em></p>
  </li>
</ul>

<h2 id="rails-422-june-16-2015">Rails 4.2.2 (June 16, 2015)</h2>

<ul>
  <li>
    <p>Fix XSS vulnerability in <code class="language-plaintext highlighter-rouge">ActiveSupport::JSON.encode</code> method.</p>

    <p>CVE-2015-3226.</p>

    <p><em>Rafael Mendonça França</em></p>
  </li>
  <li>
    <p>Fix denial of service vulnerability in the XML processing.</p>

    <p>CVE-2015-3227.</p>

    <p><em>Aaron Patterson</em></p>
  </li>
</ul>

<h2 id="rails-421-march-19-2015">Rails 4.2.1 (March 19, 2015)</h2>

<ul>
  <li>
    <p>Fixed a problem where String#truncate_words would get stuck with a complex
string.</p>

    <p><em>Henrik Nygren</em></p>
  </li>
  <li>
    <p>Fixed a roundtrip problem with AS::SafeBuffer where primitive-like strings
will be dumped as primitives:</p>

    <p>Before:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>YAML.load ActiveSupport::SafeBuffer.new("Hello").to_yaml  # =&gt; "Hello"
YAML.load ActiveSupport::SafeBuffer.new("true").to_yaml   # =&gt; true
YAML.load ActiveSupport::SafeBuffer.new("false").to_yaml  # =&gt; false
YAML.load ActiveSupport::SafeBuffer.new("1").to_yaml      # =&gt; 1
YAML.load ActiveSupport::SafeBuffer.new("1.1").to_yaml    # =&gt; 1.1
</code></pre></div>    </div>

    <p>After:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>YAML.load ActiveSupport::SafeBuffer.new("Hello").to_yaml  # =&gt; "Hello"
YAML.load ActiveSupport::SafeBuffer.new("true").to_yaml   # =&gt; "true"
YAML.load ActiveSupport::SafeBuffer.new("false").to_yaml  # =&gt; "false"
YAML.load ActiveSupport::SafeBuffer.new("1").to_yaml      # =&gt; "1"
YAML.load ActiveSupport::SafeBuffer.new("1.1").to_yaml    # =&gt; "1.1"
</code></pre></div>    </div>

    <p><em>Godfrey Chan</em></p>
  </li>
  <li>
    <p>Replace fixed <code class="language-plaintext highlighter-rouge">:en</code> with <code class="language-plaintext highlighter-rouge">I18n.default_locale</code> in <code class="language-plaintext highlighter-rouge">Duration#inspect</code>.</p>

    <p><em>Dominik Masur</em></p>
  </li>
  <li>
    <p>Add missing time zone definitions for Russian Federation and sync them
with <code class="language-plaintext highlighter-rouge">zone.tab</code> file from tzdata version 2014j (latest).</p>

    <p><em>Andrey Novikov</em></p>
  </li>
</ul>

<h2 id="rails-420-december-20-2014">Rails 4.2.0 (December 20, 2014)</h2>

<ul>
  <li>
    <p>The decorated <code class="language-plaintext highlighter-rouge">load</code> and <code class="language-plaintext highlighter-rouge">require</code> methods are now kept private.</p>

    <p>Fixes #17553.</p>

    <p><em>Xavier Noria</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">String#remove</code> and <code class="language-plaintext highlighter-rouge">String#remove!</code> accept multiple arguments.</p>

    <p><em>Pavel Pravosud</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">TimeWithZone#strftime</code> now delegates every directive to <code class="language-plaintext highlighter-rouge">Time#strftime</code> except for ‘%Z’,
it also now correctly handles escaped ‘%’ characters placed just before time zone related directives.</p>

    <p><em>Pablo Herrero</em></p>
  </li>
  <li>
    <p>Corrected <code class="language-plaintext highlighter-rouge">Inflector#underscore</code> handling of multiple successive acroynms.</p>

    <p><em>James Le Cuirot</em></p>
  </li>
  <li>
    <p>Delegation now works with ruby reserved words passed to <code class="language-plaintext highlighter-rouge">:to</code> option.</p>

    <p>Fixes #16956.</p>

    <p><em>Agis Anastasopoulos</em></p>
  </li>
  <li>
    <p>Added method <code class="language-plaintext highlighter-rouge">#eql?</code> to <code class="language-plaintext highlighter-rouge">ActiveSupport::Duration</code>, in addition to <code class="language-plaintext highlighter-rouge">#==</code>.</p>

    <p>Currently, the following returns <code class="language-plaintext highlighter-rouge">false</code>, contrary to expectation:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.minute.eql?(1.minute)
</code></pre></div>    </div>

    <p>Adding method <code class="language-plaintext highlighter-rouge">#eql?</code> will make this behave like expected. Method <code class="language-plaintext highlighter-rouge">#eql?</code> is
just a bit stricter than <code class="language-plaintext highlighter-rouge">#==</code>, as it checks whether the argument is also a duration. Their
parts may be different though.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.minute.eql?(60.seconds)  # =&gt; true
1.minute.eql?(60)          # =&gt; false
</code></pre></div>    </div>

    <p><em>Joost Lubach</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Time#change</code> can now change nanoseconds (<code class="language-plaintext highlighter-rouge">:nsec</code>) as a higher-precision
alternative to microseconds (<code class="language-plaintext highlighter-rouge">:usec</code>).</p>

    <p><em>Agis Anastasooulos</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">MessageVerifier.new</code> raises an appropriate exception if the secret is <code class="language-plaintext highlighter-rouge">nil</code>.
This prevents <code class="language-plaintext highlighter-rouge">MessageVerifier#generate</code> from raising a cryptic error later on.</p>

    <p><em>Kostiantyn Kahanskyi</em></p>
  </li>
  <li>
    <p>Introduced new configuration option <code class="language-plaintext highlighter-rouge">active_support.test_order</code> for
specifying the order in which test cases are executed. This option currently defaults
to <code class="language-plaintext highlighter-rouge">:sorted</code> but will be changed to <code class="language-plaintext highlighter-rouge">:random</code> in Rails 5.0.</p>

    <p><em>Akira Matsuda</em>, <em>Godfrey Chan</em></p>
  </li>
  <li>
    <p>Fixed a bug in <code class="language-plaintext highlighter-rouge">Inflector#underscore</code> where acroynms in nested constant names
are incorrectly parsed as camelCase.</p>

    <p>Fixes #8015.</p>

    <p><em>Fred Wu</em>, <em>Matthew Draper</em></p>
  </li>
  <li>
    <p>Make <code class="language-plaintext highlighter-rouge">Time#change</code> throw an exception if the <code class="language-plaintext highlighter-rouge">:usec</code> option is out of range and
the time has an offset other than UTC or local.</p>

    <p><em>Agis Anastasopoulos</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Method</code> objects now report themselves as not <code class="language-plaintext highlighter-rouge">duplicable?</code>. This allows
hashes and arrays containing <code class="language-plaintext highlighter-rouge">Method</code> objects to be <code class="language-plaintext highlighter-rouge">deep_dup</code>ed.</p>

    <p><em>Peter Jaros</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">determine_constant_from_test_name</code> does no longer shadow <code class="language-plaintext highlighter-rouge">NameError</code>s
which happens during constant autoloading.</p>

    <p>Fixes #9933.</p>

    <p><em>Guo Xiang Tan</em></p>
  </li>
  <li>
    <p>Added instance_eval version to Object#try and Object#try!, so you can do this:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>person.try { name.first }
</code></pre></div>    </div>

    <p>instead of:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>person.try { |person| person.name.first }
</code></pre></div>    </div>

    <p><em>DHH</em>, <em>Ari Pollak</em></p>
  </li>
  <li>
    <p>Fix the <code class="language-plaintext highlighter-rouge">ActiveSupport::Duration#instance_of?</code> method to return the right
value with the class itself since it was previously delegated to the
internal value.</p>

    <p><em>Robin Dupret</em></p>
  </li>
  <li>
    <p>Fix rounding errors with <code class="language-plaintext highlighter-rouge">#travel_to</code> by resetting the usec on any passed time to zero, so we only travel
with per-second precision, not anything deeper than that.</p>

    <p><em>DHH</em></p>
  </li>
  <li>
    <p>Fix DateTime comparison with <code class="language-plaintext highlighter-rouge">DateTime::Infinity</code> object.</p>

    <p><em>Rafael Mendonça França</em></p>
  </li>
  <li>
    <p>Added Object#itself which returns the object itself. Useful when dealing with a chaining scenario, like Active Record scopes:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Event.public_send(state.presence_in([ :trashed, :drafted ]) || :itself).order(:created_at)
</code></pre></div>    </div>

    <p><em>DHH</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Object#with_options</code> executes block in merging option context when
explicit receiver in not passed.</p>

    <p><em>Pavel Pravosud</em></p>
  </li>
  <li>
    <p>Fixed a compatibility issue with the <code class="language-plaintext highlighter-rouge">Oj</code> gem when cherry-picking the file
<code class="language-plaintext highlighter-rouge">active_support/core_ext/object/json</code> without requiring <code class="language-plaintext highlighter-rouge">active_support/json</code>.</p>

    <p>Fixes #16131.</p>

    <p><em>Godfrey Chan</em></p>
  </li>
  <li>
    <p>Make <code class="language-plaintext highlighter-rouge">Hash#with_indifferent_access</code> copy the default proc too.</p>

    <p><em>arthurnn</em>, <em>Xanders</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">String#truncate_words</code> to truncate a string by a number of words.</p>

    <p><em>Mohamed Osama</em></p>
  </li>
  <li>
    <p>Deprecate <code class="language-plaintext highlighter-rouge">capture</code> and <code class="language-plaintext highlighter-rouge">quietly</code>.</p>

    <p>These methods are not thread safe and may cause issues when used in threaded environments.
To avoid problems we are deprecating them.</p>

    <p><em>Tom Meier</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">DateTime#to_f</code> now preserves the fractional seconds instead of always
rounding to <code class="language-plaintext highlighter-rouge">.0</code>.</p>

    <p>Fixes #15994.</p>

    <p><em>John Paul Ashenfelter</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">Hash#transform_values</code> to simplify a common pattern where the values of a
hash must change, but the keys are left the same.</p>

    <p><em>Sean Griffin</em></p>
  </li>
  <li>
    <p>Always instrument <code class="language-plaintext highlighter-rouge">ActiveSupport::Cache</code>.</p>

    <p>Since <code class="language-plaintext highlighter-rouge">ActiveSupport::Notifications</code> only instruments items when there
are attached subscribers, we don’t need to disable instrumentation.</p>

    <p><em>Peter Wagenet</em></p>
  </li>
  <li>
    <p>Make the <code class="language-plaintext highlighter-rouge">apply_inflections</code> method case-insensitive when checking
whether a word is uncountable or not.</p>

    <p><em>Robin Dupret</em></p>
  </li>
  <li>
    <p>Make Dependencies pass a name to NameError error.</p>

    <p><em>arthurnn</em></p>
  </li>
  <li>
    <p>Fixed <code class="language-plaintext highlighter-rouge">ActiveSupport::Cache::FileStore</code> exploding with long paths.</p>

    <p><em>Adam Panzer</em>, <em>Michael Grosser</em></p>
  </li>
  <li>
    <p>Fixed <code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone#-</code> so precision is not unnecessarily lost
when working with objects with a nanosecond component.</p>

    <p><code class="language-plaintext highlighter-rouge">ActiveSupport::TimeWithZone#-</code> should return the same result as if we were
using <code class="language-plaintext highlighter-rouge">Time#-</code>:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Time.now.end_of_day - Time.now.beginning_of_day # =&gt; 86399.999999999
</code></pre></div>    </div>

    <p>Before:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Time.zone.now.end_of_day.nsec # =&gt; 999999999
Time.zone.now.end_of_day - Time.zone.now.beginning_of_day # =&gt; 86400.0
</code></pre></div>    </div>

    <p>After:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Time.zone.now.end_of_day - Time.zone.now.beginning_of_day
# =&gt; 86399.999999999
</code></pre></div>    </div>

    <p><em>Gordon Chan</em></p>
  </li>
  <li>
    <p>Fixed precision error in NumberHelper when using Rationals.</p>

    <p>Before:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ActiveSupport::NumberHelper.number_to_rounded Rational(1000, 3), precision: 2
# =&gt; "330.00"
</code></pre></div>    </div>

    <p>After:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ActiveSupport::NumberHelper.number_to_rounded Rational(1000, 3), precision: 2
# =&gt; "333.33"
</code></pre></div>    </div>

    <p>See #15379.</p>

    <p><em>Juanjo Bazán</em></p>
  </li>
  <li>
    <p>Removed deprecated <code class="language-plaintext highlighter-rouge">Numeric#ago</code> and friends</p>

    <p>Replacements:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5.ago   =&gt; 5.seconds.ago
5.until =&gt; 5.seconds.until
5.since =&gt; 5.seconds.since
5.from_now =&gt; 5.seconds.from_now
</code></pre></div>    </div>

    <p>See #12389 for the history and rationale behind this.</p>

    <p><em>Godfrey Chan</em></p>
  </li>
  <li>
    <p>DateTime <code class="language-plaintext highlighter-rouge">advance</code> now supports partial days.</p>

    <p>Before:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DateTime.now.advance(days: 1, hours: 12)
</code></pre></div>    </div>

    <p>After:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DateTime.now.advance(days: 1.5)
</code></pre></div>    </div>

    <p>Fixes #12005.</p>

    <p><em>Shay Davidson</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Hash#deep_transform_keys</code> and <code class="language-plaintext highlighter-rouge">Hash#deep_transform_keys!</code> now transform hashes
in nested arrays.  This change also applies to <code class="language-plaintext highlighter-rouge">Hash#deep_stringify_keys</code>,
<code class="language-plaintext highlighter-rouge">Hash#deep_stringify_keys!</code>, <code class="language-plaintext highlighter-rouge">Hash#deep_symbolize_keys</code> and
<code class="language-plaintext highlighter-rouge">Hash#deep_symbolize_keys!</code>.</p>

    <p><em>OZAWA Sakuro</em></p>
  </li>
  <li>
    <p>Fixed confusing <code class="language-plaintext highlighter-rouge">DelegationError</code> in <code class="language-plaintext highlighter-rouge">Module#delegate</code>.</p>

    <p>See #15186.</p>

    <p><em>Vladimir Yarotsky</em></p>
  </li>
  <li>
    <p>Fixed <code class="language-plaintext highlighter-rouge">ActiveSupport::Subscriber</code> so that no duplicate subscriber is created
when a subscriber method is redefined.</p>

    <p><em>Dennis Schön</em></p>
  </li>
  <li>
    <p>Remove deprecated string based terminators for <code class="language-plaintext highlighter-rouge">ActiveSupport::Callbacks</code>.</p>

    <p><em>Eileen M. Uchitelle</em></p>
  </li>
  <li>
    <p>Fixed an issue when using
<code class="language-plaintext highlighter-rouge">ActiveSupport::NumberHelper::NumberToDelimitedConverter</code> to
convert a value that is an <code class="language-plaintext highlighter-rouge">ActiveSupport::SafeBuffer</code> introduced
in 2da9d67.</p>

    <p>See #15064.</p>

    <p><em>Mark J. Titorenko</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">TimeZone#parse</code> defaults the day of the month to ‘1’ if any other date
components are specified. This is more consistent with the behavior of
<code class="language-plaintext highlighter-rouge">Time#parse</code>.</p>

    <p><em>Ulysse Carion</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">humanize</code> strips leading underscores, if any.</p>

    <p>Before:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'_id'.humanize # =&gt; ""
</code></pre></div>    </div>

    <p>After:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'_id'.humanize # =&gt; "Id"
</code></pre></div>    </div>

    <p><em>Xavier Noria</em></p>
  </li>
  <li>
    <p>Fixed backward compatibility issues introduced in 326e652.</p>

    <p>Empty Hash or Array should not be present in serialization result.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{a: []}.to_query # =&gt; ""
{a: {}}.to_query # =&gt; ""
</code></pre></div>    </div>

    <p>For more info see #14948.</p>

    <p><em>Bogdan Gusiev</em></p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">Digest::UUID::uuid_v3</code> and <code class="language-plaintext highlighter-rouge">Digest::UUID::uuid_v5</code> to support stable
UUID fixtures on PostgreSQL.</p>

    <p><em>Roderick van Domburg</em></p>
  </li>
  <li>
    <p>Fixed <code class="language-plaintext highlighter-rouge">ActiveSupport::Duration#eql?</code> so that <code class="language-plaintext highlighter-rouge">1.second.eql?(1.second)</code> is
true.</p>

    <p>This fixes the current situation of:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.second.eql?(1.second) # =&gt; false
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">eql?</code> also requires that the other object is an <code class="language-plaintext highlighter-rouge">ActiveSupport::Duration</code>.
This requirement makes <code class="language-plaintext highlighter-rouge">ActiveSupport::Duration</code>’s behavior consistent with
the behavior of Ruby’s numeric types:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.eql?(1.0) # =&gt; false
1.0.eql?(1) # =&gt; false

1.second.eql?(1) # =&gt; false (was true)
1.eql?(1.second) # =&gt; false

{ 1 =&gt; "foo", 1.0 =&gt; "bar" }
# =&gt; { 1 =&gt; "foo", 1.0 =&gt; "bar" }

{ 1 =&gt; "foo", 1.second =&gt; "bar" }
# now =&gt; { 1 =&gt; "foo", 1.second =&gt; "bar" }
# was =&gt; { 1 =&gt; "bar" }
</code></pre></div>    </div>

    <p>And though the behavior of these hasn’t changed, for reference:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 == 1.0 # =&gt; true
1.0 == 1 # =&gt; true

1 == 1.second # =&gt; true
1.second == 1 # =&gt; true
</code></pre></div>    </div>

    <p><em>Emily Dobervich</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ActiveSupport::SafeBuffer#prepend</code> acts like <code class="language-plaintext highlighter-rouge">String#prepend</code> and modifies
instance in-place, returning self. <code class="language-plaintext highlighter-rouge">ActiveSupport::SafeBuffer#prepend!</code> is
deprecated.</p>

    <p><em>Pavel Pravosud</em></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">HashWithIndifferentAccess</code> better respects <code class="language-plaintext highlighter-rouge">#to_hash</code> on objects it
receives. In particular, <code class="language-plaintext highlighter-rouge">.new</code>, <code class="language-plaintext highlighter-rouge">#update</code>, <code class="language-plaintext highlighter-rouge">#merge</code>, and <code class="language-plaintext highlighter-rouge">#replace</code> accept
objects which respond to <code class="language-plaintext highlighter-rouge">#to_hash</code>, even if those objects are not hashes
directly.</p>

    <p><em>Peter Jaros</em></p>
  </li>
  <li>
    <p>Deprecate <code class="language-plaintext highlighter-rouge">Class#superclass_delegating_accessor</code>, use <code class="language-plaintext highlighter-rouge">Class#class_attribute</code> instead.</p>

    <p><em>Akshay Vishnoi</em></p>
  </li>
  <li>
    <p>Ensure classes which <code class="language-plaintext highlighter-rouge">include Enumerable</code> get <code class="language-plaintext highlighter-rouge">#to_json</code> in addition to
<code class="language-plaintext highlighter-rouge">#as_json</code>.</p>

    <p><em>Sammy Larbi</em></p>
  </li>
  <li>
    <p>Change the signature of <code class="language-plaintext highlighter-rouge">fetch_multi</code> to return a hash rather than an
array. This makes it consistent with the output of <code class="language-plaintext highlighter-rouge">read_multi</code>.</p>

    <p><em>Parker Selbert</em></p>
  </li>
  <li>
    <p>Introduce <code class="language-plaintext highlighter-rouge">Concern#class_methods</code> as a sleek alternative to clunky
<code class="language-plaintext highlighter-rouge">module ClassMethods</code>. Add <code class="language-plaintext highlighter-rouge">Kernel#concern</code> to define at the toplevel
without chunky <code class="language-plaintext highlighter-rouge">module Foo; extend ActiveSupport::Concern</code> boilerplate.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># app/models/concerns/authentication.rb
concern :Authentication do
  included do
    after_create :generate_private_key
  end

  class_methods do
    def authenticate(credentials)
      # ...
    end
  end

  def generate_private_key
    # ...
  end
end

# app/models/user.rb
class User &lt; ActiveRecord::Base
  include Authentication
end
</code></pre></div>    </div>

    <p><em>Jeremy Kemper</em></p>
  </li>
</ul>

<p>Please check <a href="https://github.com/rails/rails/blob/4-1-stable/activesupport/CHANGELOG.md">4-1-stable</a> for previous changes.</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

      


    </div>

    
  </article>

  
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/HuiminQu"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://huiminqu.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Huimin Qu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://huiminqu.github.io/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

